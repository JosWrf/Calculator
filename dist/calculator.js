(()=>{"use strict";const t="Floating Point",s="Integer",e="-";class r{constructor(t,s,e=1){this.type=t,this.start_idx=s,this.width=e}}class n{constructor(t){this.text=t}visitBinary(t){const s=t.left.accept(this),r=t.right.accept(this);switch(t.operator.type){case"+":return s+r;case e:return s-r;case"*":return s*r;case"/":if(0==r)throw"Can not divide by 0!";return s/r}}visitUnary(t){return-t.operand.accept(this)}visitExpr(t){return t.expr.accept(this)}visitValue(t){const e=t.value.start_idx,r=t.value.width+e;return t.type==s?parseInt(this.text.slice(e,r)):parseFloat(this.text.slice(e,r))}}class i{currPos=0;text="";isAtEnd(){return this.currPos==this.text.length}isNumeric(t){return!isNaN(parseInt(t))}peak(){return this.text[this.currPos]}consume(){return this.text[this.currPos++]}handleOperands(){const e=this.currPos-1;for(;!this.isAtEnd()&&this.isNumeric(this.peak());)this.consume();if(this.isAtEnd()||"."!=this.peak())return new r(s,e,this.currPos-e);if(this.consume(),this.isAtEnd()||!this.isNumeric(this.peak()))throw`Invalid Floating point number ${this.text.slice(e,this.currPos-e)}!`;for(;!this.isAtEnd()&&this.isNumeric(this.peak());)this.consume();return new r(t,e,this.currPos-e)}scan(){const t=this.consume();switch(t){case"+":return new r("+",this.currPos-1);case"-":return new r(e,this.currPos-1);case"/":return new r("/",this.currPos-1);case"*":return new r("*",this.currPos-1);case"(":return new r("(",this.currPos-1);case")":return new r(")",this.currPos-1)}if(this.isNumeric(t))return this.handleOperands();throw`Invalid Character encountered ${t} at position ${this.currPos} of the input.`}scanInput(t){this.currPos=0,this.text=t;const s=[];for(;!this.isAtEnd();){const t=this.scan();s.push(t)}return s.push(new r("EOF",this.text.length)),s}}class c{}class u extends c{constructor(t){super(),this.expr=t}accept(t){return t.visitExpr(this)}}class h extends c{constructor(t,s,e){super(),this.left=t,this.right=s,this.operator=e}accept(t){return t.visitBinary(this)}}class o extends c{constructor(t,s){super(),this.operand=t,this.operator=s}accept(t){return t.visitUnary(this)}}class a extends c{constructor(t){super(),this.value=t}accept(t){return t.visitValue(this)}}class p{tokens=[];currPos=0;text="";isAtEnd(){return"EOF"==this.peek().type}isTokenTypeIn(...t){if(this.isAtEnd())return!1;for(const s of t)if(s==this.peek().type)return!0;return!1}peek(){return this.tokens[this.currPos]}consume(){return this.tokens[this.currPos++]}parse(t,s){return this.tokens=t,this.text=s,this.currPos=0,this.linear()}linear(){let t=this.factor();for(;this.isTokenTypeIn(e,"+");){const s=this.consume(),e=this.factor();t=new h(t,e,s)}return t}factor(){let t=this.unary();for(;this.isTokenTypeIn("/","*");){const s=this.consume(),e=this.unary();t=new h(t,e,s)}return t}unary(){if(this.isTokenTypeIn(e)){const t=this.consume(),s=this.unary();return new o(s,t)}return this.parennum()}parennum(){if(this.isTokenTypeIn(t,s))return new a(this.consume());if(this.isTokenTypeIn("(")){this.consume();const t=this.linear();if(")"!=this.peek().type)throw"Expect closing parenthesis.";return this.consume(),new u(t)}throw`Unexpected tokentype ${this.peek().type}.`}}const l=new class{scanner=new i;parser=new p;interpret(t){if(0===t.length)return"";try{const s=this.scanner.scanInput(t),e=this.parser.parse(s,t),r=new n(t);return e.accept(r)}catch(t){return alert(t),null}}},d=document.querySelector(".buttons"),w=document.querySelector("#display");d.addEventListener("click",(function(t){const s=t.target;switch(s.getAttribute("class")){case"remove":w.value=w.value.slice(0,-1);break;case"clear":w.value="";break;case"equals":const t=l.interpret(w.value);w.value=null!==t?t:w.value;break;case"operator":case"number":w.value+=s.textContent}}))})();